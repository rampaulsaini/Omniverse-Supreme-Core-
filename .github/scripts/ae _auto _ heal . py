#!/usr/bin/env python3
# .github/scripts/ae_auto_heal.py
import os, subprocess, sys, datetime

def check_pages():
    import urllib.request
    try:
        with urllib.request.urlopen("https://rampaulsaini.github.io/Omniverse-Supreme-Core-/", timeout=8) as r:
            return r.status == 200
    except Exception as e:
        print("pages check failed:", e)
        return False

def remediate():
    # simple remediation: touch file to trigger GH Pages build (via commit)
    stamp = datetime.datetime.utcnow().isoformat()
    with open(".ae_restart_stamp","w",encoding="utf-8") as f:
        f.write(stamp)
    # git add/commit would be done in GH Action runner

if __name__ == "__main__":
    ok = check_pages()
    if not ok:
        remediate()
        print("Remediation staged")
    else:
        print("OK")
